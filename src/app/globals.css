@import "tailwindcss";
@import "leaflet/dist/leaflet.css";

@theme {
  /* ── Brand: warm amber-orange ── */
  --color-brand-50:  #fff8ed;
  --color-brand-100: #ffefd3;
  --color-brand-200: #fddba5;
  --color-brand-400: #fb9f3a;
  --color-brand-500: #f97316;
  --color-brand-600: #ea6c0a;
  --color-brand-700: #c2530b;

  /* ── Light mode surfaces ── */
  --color-bg-base:     #f9f8f6;
  --color-bg-surface:  #ffffff;
  --color-bg-elevated: #f3f2ef;
  --color-bg-accent:   #f97316;

  /* ── Light mode text ── */
  --color-text-primary:   #1a1917;
  --color-text-secondary: #57534e;
  --color-text-muted:     #a8a29e;
  --color-text-on-accent: #ffffff;

  /* ── Light mode borders ── */
  --color-border:        #e7e5e4;
  --color-border-strong: #d6d3d1;

  /* ── Typography ── */
  --font-sans:    var(--font-inter), 'Inter', ui-sans-serif, system-ui, -apple-system, sans-serif;
  --font-display: var(--font-syne), 'Syne', ui-sans-serif, system-ui, sans-serif;

  /* ── Shadows ── */
  --shadow-card:       0 1px 2px 0 rgb(0 0 0 / 0.06), 0 1px 3px 0 rgb(0 0 0 / 0.1);
  --shadow-card-hover: 0 4px 12px -2px rgb(0 0 0 / 0.12), 0 2px 6px -2px rgb(0 0 0 / 0.08);
  --shadow-modal:      0 24px 48px -8px rgb(0 0 0 / 0.18), 0 8px 16px -4px rgb(0 0 0 / 0.1);
}

/* ── Dark mode: warm charcoal, zero blue cast ── */
[data-theme="dark"] {
  --color-bg-base:     #111110;
  --color-bg-surface:  #1c1b1a;
  --color-bg-elevated: #282725;
  --color-bg-accent:   #f97316;

  --color-text-primary:   #fafaf9;
  --color-text-secondary: #a8a29e;
  --color-text-muted:     #57534e;
  --color-text-on-accent: #ffffff;

  --color-border:        #2e2d2b;
  --color-border-strong: #3d3c39;

  --shadow-card:       0 1px 3px 0 rgb(0 0 0 / 0.45), 0 1px 2px -1px rgb(0 0 0 / 0.45);
  --shadow-card-hover: 0 8px 20px -4px rgb(0 0 0 / 0.55), 0 4px 8px -4px rgb(0 0 0 / 0.45);
  --shadow-modal:      0 32px 64px -12px rgb(0 0 0 / 0.7), 0 16px 32px -8px rgb(0 0 0 / 0.55);

  /* Brand tints for dark surfaces */
  --color-brand-50:  rgba(249, 115, 22, 0.1);
  --color-brand-100: rgba(249, 115, 22, 0.16);
  --color-brand-700: #fb923c;
}

/* ── Base ── */
html {
  font-family: var(--font-sans);
  background-color: var(--color-bg-base);
  color: var(--color-text-primary);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  min-height: 100dvh;
  background-color: var(--color-bg-base);
}

/* ── Leaflet theme overrides ── */
.leaflet-container {
  background-color: var(--color-bg-base);
  font-family: var(--font-sans);
}

.leaflet-popup-content-wrapper {
  background-color: var(--color-bg-surface);
  color: var(--color-text-primary);
  box-shadow: var(--shadow-card);
  border-radius: 0.625rem;
  border: 1px solid var(--color-border);
}

.leaflet-popup-tip {
  background-color: var(--color-bg-surface);
}

.leaflet-control-zoom a {
  background-color: var(--color-bg-surface);
  color: var(--color-text-secondary);
  border-color: var(--color-border) !important;
}

.leaflet-control-zoom a:hover {
  background-color: var(--color-bg-elevated);
  color: var(--color-text-primary);
}

.leaflet-bar {
  border: 1px solid var(--color-border) !important;
  box-shadow: var(--shadow-card) !important;
  border-radius: 0.5rem !important;
  overflow: hidden;
}

.leaflet-control-attribution {
  background-color: var(--color-bg-surface) !important;
  color: var(--color-text-muted) !important;
  font-size: 0.6875rem !important;
}

/* ── Skeleton shimmer ── */
@keyframes skeleton-shimmer {
  0%   { background-position: -400px 0; }
  100% { background-position: 400px 0; }
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    var(--color-bg-elevated) 25%,
    var(--color-bg-surface) 37%,
    var(--color-bg-elevated) 63%
  );
  background-size: 400px 100%;
  animation: skeleton-shimmer 1.4s ease infinite;
}

[data-theme="dark"] .skeleton-shimmer {
  background: linear-gradient(
    90deg,
    var(--color-bg-elevated) 25%,
    #302e2c 37%,
    var(--color-bg-elevated) 63%
  );
  background-size: 400px 100%;
}

/* ── Focus ring ── */
:focus-visible {
  outline: 2px solid var(--color-brand-500);
  outline-offset: 2px;
  border-radius: 2px;
}

/* ── Screen reader only ── */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only:focus,
.sr-only:active {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}
